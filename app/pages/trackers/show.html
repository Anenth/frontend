<ul class="breadcrumb">
  <li><a href="/">Home</a><span class="divider">Â»</span></li>
  <li><a href="/trackers/{{tracker.slug}}">{{ tracker.name ||'Loading...' }}</a></li>
</ul>

<div class="row-fluid" ng-show="tracker">
  <div class="span3">
    <div class="well text-center">
      <div><img src="{{tracker.image_url}}" /></div>
      <br />

      <button class="btn btn-block btn-large" ng-class="{ active: (tracker.followed), 'btn-success': (!tracker.followed) }" ng-click="tracker.follow()">
        <span ng-show="tracker.followed">Following</span>
        <span ng-hide="tracker.followed">Follow</span>
      </button>
    </div>

    <div class="well well-small">
      <div class="text-center">
        <h2 style="margin: 0;" ng-show="tracker.bounty_total > 0" class="text-center">{{tracker.bounty_total | dollars}}</h2>
        <div>in bounties</div>
      </div>

      <div class="row-fluid">
        <div class="span6 text-center">
          <h3 style="margin: 0;">{{tracker.forks | number}}</h3>
          <div>{{'fork' | pluralize:tracker.forks}}</div>
        </div>
        <div class="span6 text-center">
          <h3 style="margin: 0;">{{tracker.watchers | number}}</h3>
          <div>{{'watcher' | pluralize:tracker.watchers}}</div>
        </div>
      </div>
    </div>

    <h3>Tags</h3>
    <ul class="inline">
      <li ng-repeat="language in tracker.languages"><span class="badge">{{language.name}}</span></li>
    </ul>
  </div>

  <div class="span9">
    <h1>{{tracker.name}}</h1>
    <p class="lead">{{tracker.description}}</p>
    <div ng-include="'pages/trackers/partials/nav_tabs.html'"></div>

    <div class="row-fluid">
      <div class="span3">
        <div class="well well-small">
          <input type="text" class="span12" min="0" placeholder="Search issues" ng-model="issue_filter_options.text" ng-change="update_filter_options()" />

          <input type="number" class="span5" min="0" placeholder="50" ng-model="issue_filter_options.bounty_min" ng-change="update_filter_options()" />
          <span>Bounty Min</span>

          <label class="checkbox">
            <input type="checkbox" ng-model="issue_filter_options.only_valuable" />
            Has active bounties
          </label>

          <label class="checkbox">
            <input type="checkbox" ng-model="issue_filter_options.show_closed" />
            Show Closed Issues
          </label>
        </div>
      </div>
      <div class="span9">
        <div ng-show="(tracker.issues | filter:issue_filter).length == 0" class="alert alert-info">No issues found :(</div>

        <table class="table table-condensed table-striped" ng-show="(tracker.issues | filter:issue_filter).length > 0">
          <thead>
          <tr>
            <th><a ng-click="change_order_col('bounty_total')">Bounty</a></th>
            <th></th>
            <th><a ng-click="change_order_col('comment_count')">Comments</a></th>
          </tr>
          </thead>

          <tbody>
          <tr ng-repeat="issue in tracker.issues | filter:issue_filter | orderBy:order_col:order_reverse" ng-class="{ success: (issue.bounty_total > 0), warning: (!issue.can_add_bounty) }">
            <td>
              <span ng-show="issue.bounty_total > 0" class="badge badge-success">{{issue.bounty_total | dollars}}</span>
            </td>
            <td class="span7">
              <a ng-href="/issues/{{issue.slug}}" ng-class="{ 'text-success': (issue.bounty_total > 0), 'text-warning': (!issue.can_add_bounty) }">{{issue.title}}</a>
            </td>
            <td>
              <a ng-href="/issues/{{issue.slug}}/comments" class="btn btn-block btn-mini">
                <i class="icon-comment"></i>
                {{issue.comment_count | number}}
              </a>
            </td>
            <td class="span1">
              <a ng-href="{{issue.url}}" class="btn btn-block btn-mini" target="blank" tooltip="View Issue" tooltip-placement="top">
                <i class="icon-globe"></i>
              </a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
